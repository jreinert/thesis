describe Crouter::Router
  context ".route"
    it "matches a route for the context method and path and calls its action"
    it "favors static routes and calls only one route"
    it "calls blocks"
    it "sets status code 404 if no route matches"
    it "writes to the response body"
    it "matches trailing / variants of a route and vice versa"
  context "group"
    it "groups underlying routes by preit a given prefix"
    it "it restores the prefix after the block"
    it "it supports nesting"
    it "it supports params in group prefix"
  context ".new"
    it "supports mountpoints"
describe Crouter::Route
  context ".new"
    it "raises if a pattern not starting with '/' is passed"
    it "raises if a pattern has optional parts in the middle"
  context "#match"
    it "returns a match object with the named groups as defined in the pattern"
    it "escapes special regex chars"
    it "matches paths with query params"
    it "allows slashes in params"
  context "#call_action"
    it "calls the action passed to the initializer with the passed context and params"
    it "parses a post request body if it's a application/x-www-form-urlencoded"
